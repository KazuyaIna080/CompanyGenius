# 🔗 CompanyGenius Embedded Edition

**データベース内蔵型企業名予測Chrome拡張機能**

## 🚀 特徴

- **ゼロ設定**: インストール後すぐに利用開始
- **データベース内蔵**: EDINETコードリスト約4,000社をChrome拡張機能に内蔵
- **オフライン動作**: ネットワーク接続不要
- **学習機能**: ユーザー修正を自動学習・改善
- **瞬間レスポンス**: メモリ内検索で高速動作

## 📦 開発版テスト手順

### 1. Chrome拡張機能のインストール

```bash
# 1. Chromeで chrome://extensions/ を開く
# 2. 右上の「デベロッパーモード」をONにする
# 3. 「パッケージ化されていない拡張機能を読み込む」をクリック
# 4. このディレクトリ (chrome_extension_embedded) を選択
```

### 2. 動作確認

#### ポップアップ機能
1. Chrome右上の拡張機能アイコンをクリック
2. 企業名を入力（例: トヨタ、ソニー、任天堂）
3. 「🔍 企業名を予測」ボタンをクリック
4. 予測結果が表示されることを確認

#### 右クリックメニュー機能
1. 任意のWebページを開く
2. 企業名らしきテキストを選択
3. 右クリック → 「CompanyGeniusで企業名を予測」を選択
4. 予測結果ダイアログが表示されることを確認

#### 学習機能テスト
1. 予測結果で「❌ 間違い」ボタンをクリック
2. 正しい企業名を入力
3. 同じ検索語で再度予測
4. 学習した結果が表示されることを確認

## 🧪 現在の実装状態

### ✅ 実装済み
- [x] Chrome拡張機能の基本構造（Manifest V3）
- [x] Service Worker（background.js）
- [x] ポップアップUI（popup.html/js）
- [x] コンテンツスクリプト（content.js）
- [x] 右クリックメニュー統合
- [x] ダミーデータベース（開発用）
- [x] ユーザー学習機能（Chrome Storage API）
- [x] 予測アルゴリズム（4段階カスケード）

### 🚧 開発中
- [ ] sql.js ライブラリ統合
- [ ] 実際のEDINETデータベース作成・内蔵
- [ ] 検索パフォーマンス最適化
- [ ] Chrome Web Store公開準備

### 📊 テスト用ダミーデータ

現在以下の企業で動作テスト可能：
- トヨタ → トヨタ自動車株式会社 (7203)
- ソニー → ソニーグループ株式会社 (6758)
- ソフトバンク → ソフトバンクグループ株式会社 (9984)
- 任天堂 → 任天堂株式会社 (7974)
- キーエンス → 株式会社キーエンス (6861)
- ファナック → ファナック株式会社 (6954)
- 信越化学 → 信越化学工業株式会社 (4063)
- 東京エレクトロン → 株式会社東京エレクトロン (8035)
- ダイキン → ダイキン工業株式会社 (6367)
- KDDI → KDDI株式会社 (9433)

## 🐛 既知の問題・TODO

### 技術的課題
- [ ] sql.js ライブラリの適切な統合方法
- [ ] WebAssembly SQLiteのパフォーマンス最適化
- [ ] Chrome拡張機能でのファイルサイズ制限対応
- [ ] IndexedDBでの大容量データ管理

### UI/UX改善
- [ ] エラーハンドリングの強化
- [ ] ローディング状態の改善
- [ ] レスポンシブデザイン対応
- [ ] アクセシビリティ向上

### 機能拡張
- [ ] 検索履歴機能
- [ ] お気に入り企業登録
- [ ] 統計情報表示
- [ ] エクスポート・インポート機能

## 🔧 開発環境

### 必要なツール
- Chrome Browser（最新版）
- テキストエディタ（VS Code推奨）
- Git

### 開発フロー
1. ソースコード編集
2. chrome://extensions/ で「再読み込み」
3. 動作確認・テスト
4. デバッグ（F12 Developer Tools）

### デバッグ方法

```javascript
// Background Script (Service Worker) のログ確認
// chrome://extensions/ → 拡張機能詳細 → 「service worker」リンクをクリック

// Content Script のログ確認  
// 任意のページでF12 → Console タブ

// Popup のログ確認
// ポップアップ表示中にF12 → Console タブ
```

## 📈 次のステップ

### Phase 1: sql.js統合
1. sql.js ライブラリのダウンロード・配置
2. WebAssembly SQLiteの初期化コード実装
3. ダミーデータベースから実SQLiteへの移行

### Phase 2: 実データ統合
1. EDINETコードリストCSVの処理
2. SQLiteデータベースファイル生成
3. Chrome拡張機能への内蔵

### Phase 3: 最適化・公開準備
1. パフォーマンス最適化
2. エラーハンドリング強化
3. Chrome Web Store申請準備

---

**🔗 CompanyGenius Embedded Editionで企業名予測の新しい体験を提供します！**