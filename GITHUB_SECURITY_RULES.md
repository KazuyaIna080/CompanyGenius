# 🔒 GitHub公開プロジェクト セキュリティ・コンプライアンス必須ルール

## 📋 適用範囲
**すべてのGitHub公開プロジェクト（全件）に強制適用**

---

## 🚨 コミット前必須チェック項目

### (1) 📊 機密情報・個人情報チェック

#### ✅ APIキー・認証情報
- [ ] APIキー、トークン、パスワードが平文で含まれていない
- [ ] `.env` ファイル、設定ファイルが適切に除外されている
- [ ] テンプレートファイル（`.env.template`等）で代替している
- [ ] 環境変数化が完了している

#### ✅ 個人情報
- [ ] 個人名、ユーザー名が除去・匿名化されている
- [ ] 個人のパス（`/Users/username/`等）が除去されている
- [ ] 個人メールアドレスが除去されている
- [ ] 電話番号、住所等の個人識別情報が除去されている

#### ✅ ログ・テストデータ
- [ ] 実際のログファイル（`*.log`）が除外されている
- [ ] 実際のユーザーデータが除去されている
- [ ] テストデータに実在人物・企業の機密情報が含まれていない
- [ ] デバッグ情報に個人情報が含まれていない

#### ✅ システム情報
- [ ] 内部IP、ホスト名が除去されている
- [ ] データベース接続情報が除去されている
- [ ] 開発環境固有のパスが除去されている

---

### (2) 📜 データソース・ライセンス・コンプライアンス

#### ✅ データソースの利用規約確認
- [ ] 使用する外部API・データベースの商用利用条件を確認済み
- [ ] 必要な出典明記・アトリビューションを記載済み
- [ ] 利用制限（リクエスト数、用途等）を遵守している
- [ ] 第三者提供に関する制約を確認済み

#### ✅ ライセンス・法的要件
- [ ] オープンソースライセンス（MIT、Apache等）を適切に設定
- [ ] 依存ライブラリのライセンス互換性を確認
- [ ] 著作権表示が適切に記載されている
- [ ] 商標権、特許権の侵害がないことを確認

#### ✅ 準拠性文書
- [ ] README.mdにデータソース出典を明記
- [ ] 利用規約への準拠を文書化
- [ ] 必要に応じてCOMPLIANCE.mdを作成
- [ ] API利用条件をセキュリティガイドに記載

---

## 🛠️ 実装必須項目

### セキュリティファイル
- [ ] `.gitignore` の適切な設定
- [ ] `SECURITY_SETUP.md` の作成
- [ ] 設定テンプレートファイル（`.env.template`等）の提供
- [ ] 個人情報除去のためのスクリプト整備

### ドキュメント
- [ ] README.mdにセキュリティセクション追加
- [ ] データソース・ライセンス情報の明記
- [ ] インストール・セットアップガイドの提供
- [ ] トラブルシューティング情報の記載

---

## 🔍 チェック手順

### Step 1: 自動スキャン
```bash
# 機密情報検索
grep -r "api_key\|password\|token\|secret" --exclude-dir=.git .
grep -r "/Users/\|/home/[^/]*/\|C:\\Users" --exclude-dir=.git .
find . -name "*.log" -o -name "*.env" | grep -v template

# APIキー形式検索
grep -rE "[A-Za-z0-9]{20,}" --include="*.json" --include="*.py" .
```

### Step 2: 手動確認
- 全ファイルの目視確認（特に設定ファイル）
- テストデータの内容確認
- コメント・文字列リテラルの確認

### Step 3: 法的確認
- 使用APIの利用規約読み込み
- 商用利用可否の確認
- 必要なアトリビューション文の準備

---

## 📊 データソース別対応例

### 国税庁系API
```markdown
## データソース
このアプリケーションは以下のデータソースを使用しています：

- **法人番号システムWeb-API（国税庁）**
  - 出典：国税庁法人番号公表サイト
  - 注記：このサービスは、国税庁法人番号システムWeb-API機能を利用して取得した情報をもとに作成しているが、サービスの内容は国税庁によって保証されたものではない
```

### EDINET API
```markdown
- **EDINET API（金融庁）**
  - 出典：EDINET（金融庁）
  - ライセンス：公共データ利用規約（PDL1.0）準拠
  - 商用利用：可能（出典明記要）
```

### 商用API
```markdown
- **[API名]**
  - 提供者：[会社名]
  - 利用規約：[URL]
  - 商用利用：[可/不可]
  - 制限事項：[リクエスト数制限等]
```

---

## 🚨 違反時の対応

### 緊急対応（即座実行）
1. **リポジトリを一時的にプライベート化**
2. **問題のあるコミットを特定・除去**
3. **APIキー等の無効化・再生成**
4. **修正版のプッシュ**
5. **再公開前の完全チェック**

### 予防策
- Pre-commitフックの設定
- GitHub Secret Scanningの有効化
- 定期的なセキュリティ監査
- チーム内ルール共有

---

## 📋 チェックリスト（コピー用）

```
## GitHub公開前セキュリティチェック

### (1) 機密情報・個人情報
- [ ] APIキー・認証情報除去
- [ ] 個人情報匿名化
- [ ] ログファイル除外
- [ ] テストデータクリーン化
- [ ] システム情報除去

### (2) コンプライアンス
- [ ] データソース利用規約確認
- [ ] 商用利用可否確認
- [ ] 必要なアトリビューション記載
- [ ] ライセンス設定
- [ ] 準拠性文書作成

### セキュリティファイル
- [ ] .gitignore設定
- [ ] SECURITY_SETUP.md作成
- [ ] 設定テンプレート提供
- [ ] README.mdセキュリティセクション

### 最終確認
- [ ] 自動スキャン実行
- [ ] 手動目視確認
- [ ] 法的要件確認
- [ ] ドキュメント完備

✅ 全項目確認済み - GitHub公開可能
```

---

## 🎯 適用開始

**即座適用**: この文書作成時点から全GitHub公開プロジェクトに適用

**定期見直し**: 3ヶ月毎にルール更新・改善

**緊急時**: セキュリティインシデント発生時は即座にルール見直し

---

**⚠️ 重要**: このルールは例外なくすべてのGitHub公開プロジェクトに適用します。違反は重大なセキュリティリスクとコンプライアンス問題を引き起こす可能性があります。